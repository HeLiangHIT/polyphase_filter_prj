`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date:    23:20:26 05/23/2016 
// Design Name: 
// Module Name:    out_da_data 
// Project Name: 
// Target Devices: 
// Tool versions: 
// Description: 
//
// Dependencies: 
//
// Revision: 
// Revision 0.01 - File Created
// Additional Comments: 
//
//////////////////////////////////////////////////////////////////////////////////
module out_da_data(
    input clk_in,
    input rst_n,
    input [2:0] key,
    output reg [13:0] DA_value,
    output DA_clk,
	 output DA_reset_n
    );
assign DA_reset_n = rst_n;
assign DA_clk = clk_in;

//ç›´æ¥FIRæ»¤æ³¢
wire [8:0] data_out1;
wire [8:0] data_out_up1;
wire [8:0] fir_out1;
wire [8:0] fir_out_up1;
data_fir fir1 (
	.clk(clk_in),
	.fir_out(fir_out1),
	.data_out(data_out1),
	.rst_n(rst_n)
);
assign data_out_up1 = data_out1 + 8'd128;
assign fir_out_up1 = fir_out1 + 8'd128;

//å¤šç›¸FIRæ»¤æ³¢
wire [8:0] data_out2;
wire [8:0] data_out_up2;
wire [8:0] fir_out2;
wire [8:0] fir_out_up2;
polypase_fir fir2 (
	.clk(clk_in),
	.fir_out(fir_out2),
	.data_out(data_out2),
	.rst_n(rst_n)
);
assign data_out_up2 = data_out2 + 8'd128;//å°†æ•°æ®æŠ¬é«˜åˆ°0-256ä¹‹é—´ï¼Œè´Ÿæ•°ä¼šç¿»è½¬æ³¢å½¢
assign fir_out_up2 = fir_out2 + 8'd128;

//æŠ½å–å™
wire [8:0] data_out3;
wire [8:0] data_out_up3;
wire [8:0] fir_out3;
wire [8:0] fir_out_up3;
decimation fir3 (
	.clk(clk_in),
	.fir_out(fir_out3),
	.data_out(data_out3),
	.rst_n(rst_n)
);
assign data_out_up3 = data_out3 + 8'd128;
assign fir_out_up3 = fir_out3 + 8'd128;

//æ’å€¼å™¨
wire [8:0] data_out4;
wire [8:0] data_out_up4;
wire [8:0] fir_out4;
wire [8:0] fir_out_up4;
interpolation fir4 (
	.clk(clk_in),
	.fir_out(fir_out4),
	.data_out(data_out4),
	.rst_n(rst_n)
);
assign data_out_up4 = data_out4 + 8'd128;
assign fir_out_up4 = fir_out4 + 8'd128;

//è¾“å‡ºé€‰æ‹©æ§åˆ¶
always @(posedge clk_in or negedge rst_n) begin
   if(!rst_n)
   		DA_value = 14'd0;
	else begin
		case (key)
		//ç›´æ¥FIRæ»¤æ³¢
			3'd0: DA_value = (data_out_up1<<6);
			3'd1: DA_value = (fir_out_up1<<6);
		//å¤šç›¸FIRæ»¤æ³¢
			3'd2: DA_value = (data_out_up2<<6);
			3'd3: DA_value = (fir_out_up2<<6);
		//æŠ½å–å™
			3'd4: DA_value = (data_out_up3<<6);
			3'd5: DA_value = (fir_out_up3<<6);
		//æ’å€¼å™¨
			3'd6: DA_value = (data_out_up4<<6);
			3'd7: DA_value = (fir_out_up4<<6);
		endcase
	end//else
end//always


endmodule
